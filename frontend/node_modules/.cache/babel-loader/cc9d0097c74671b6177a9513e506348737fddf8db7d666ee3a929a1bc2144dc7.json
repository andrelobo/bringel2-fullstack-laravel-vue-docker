{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { createProduto, updateProduto, getProdutoById, getCategorias } from '../api';\nexport default {\n  __name: 'ProdutoForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const nome = ref('');\n    const descricao = ref('');\n    const preco = ref(0);\n    const categoriaId = ref('');\n    const dataValidade = ref('');\n    const categorias = ref([]);\n    const errorMessage = ref('');\n    const isEditing = ref(false);\n    onMounted(async () => {\n      try {\n        const response = await getCategorias();\n        if (response.data.success) {\n          categorias.value = response.data.data;\n        } else {\n          errorMessage.value = 'Erro ao carregar categorias.';\n        }\n        if (route.params.id) {\n          isEditing.value = true;\n          const produtoResponse = await getProdutoById(route.params.id);\n          if (produtoResponse.data.success) {\n            const produto = produtoResponse.data.data;\n            nome.value = produto.nome;\n            descricao.value = produto.descricao;\n            preco.value = parseFloat(produto.preco) || 0;\n            categoriaId.value = produto.categoria_id;\n            dataValidade.value = produto.data_validade.split('T')[0]; // Formata para o formato `yyyy-MM-dd`\n          } else {\n            errorMessage.value = 'Erro ao carregar dados do produto.';\n          }\n        }\n      } catch (error) {\n        console.error('Erro ao carregar dados:', error);\n        errorMessage.value = 'Erro ao carregar dados. Por favor, tente novamente.';\n      }\n    });\n    const handleSubmit = async () => {\n      errorMessage.value = ''; // Limpar mensagem de erro anterior\n\n      try {\n        const produtoData = {\n          nome: nome.value,\n          descricao: descricao.value,\n          preco: parseFloat(preco.value),\n          categoria_id: categoriaId.value,\n          data_validade: dataValidade.value\n        };\n        if (isEditing.value) {\n          const response = await updateProduto(route.params.id, produtoData);\n          if (!response.data.success) throw new Error('Erro ao atualizar o produto.');\n        } else {\n          const response = await createProduto(produtoData);\n          if (!response.data.success) throw new Error('Erro ao cadastrar o produto.');\n        }\n        router.push('/produtos');\n      } catch (error) {\n        console.error('Erro ao salvar produto:', error);\n        if (error.response && error.response.status === 422) {\n          const validationErrors = error.response.data.errors;\n          errorMessage.value = Object.values(validationErrors).flat().join(', ');\n        } else {\n          errorMessage.value = 'Erro ao salvar produto. Por favor, tente novamente.';\n        }\n      }\n    };\n    const __returned__ = {\n      route,\n      router,\n      nome,\n      descricao,\n      preco,\n      categoriaId,\n      dataValidade,\n      categorias,\n      errorMessage,\n      isEditing,\n      handleSubmit,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get createProduto() {\n        return createProduto;\n      },\n      get updateProduto() {\n        return updateProduto;\n      },\n      get getProdutoById() {\n        return getProdutoById;\n      },\n      get getCategorias() {\n        return getCategorias;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","useRouter","createProduto","updateProduto","getProdutoById","getCategorias","route","router","nome","descricao","preco","categoriaId","dataValidade","categorias","errorMessage","isEditing","response","data","success","value","params","id","produtoResponse","produto","parseFloat","categoria_id","data_validade","split","error","console","handleSubmit","produtoData","Error","push","status","validationErrors","errors","Object","values","flat","join"],"sources":["/home/lobo/Desktop/KODE/bringel2/frontend/src/components/ProdutoForm.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8\">\n    <div class=\"max-w-md w-full space-y-8 bg-gray-800 p-10 rounded-xl shadow-lg mx-auto\">\n      <div>\n        <h2 class=\"mt-6 text-center text-3xl font-extrabold text-white\">\n          {{ isEditing ? 'Editar Produto' : 'Cadastrar Novo Produto' }}\n        </h2>\n      </div>\n      <form class=\"mt-8 space-y-6\" @submit.prevent=\"handleSubmit\">\n        <div v-if=\"errorMessage\" class=\"text-red-500 text-sm mb-4\">\n          {{ errorMessage }}\n        </div>\n        <div>\n          <label for=\"nome\" class=\"sr-only\">Nome do Produto</label>\n          <input id=\"nome\" name=\"nome\" type=\"text\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Nome do Produto\" v-model=\"nome\">\n        </div>\n        <div>\n          <label for=\"descricao\" class=\"sr-only\">Descrição</label>\n          <textarea id=\"descricao\" name=\"descricao\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Descrição\" v-model=\"descricao\"></textarea>\n        </div>\n        <div>\n          <label for=\"preco\" class=\"sr-only\">Preço</label>\n          <input id=\"preco\" name=\"preco\" type=\"number\" step=\"0.01\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Preço\" v-model=\"preco\">\n        </div>\n        <div>\n          <label for=\"data_validade\" class=\"sr-only\">Data de Validade</label>\n          <input id=\"data_validade\" name=\"data_validade\" type=\"date\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Data de Validade\" v-model=\"dataValidade\">\n        </div>\n        <div>\n          <label for=\"categoria\" class=\"sr-only\">Categoria</label>\n          <select id=\"categoria\" name=\"categoria\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            v-model=\"categoriaId\">\n            <option value=\"\">Selecione uma categoria</option>\n            <option v-for=\"categoria in categorias\" :key=\"categoria.id\" :value=\"categoria.id\">\n              {{ categoria.nome }}\n            </option>\n          </select>\n        </div>\n        <div>\n          <button type=\"submit\"\n            class=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\">\n            {{ isEditing ? 'Atualizar' : 'Cadastrar' }}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { createProduto, updateProduto, getProdutoById, getCategorias } from '../api'\n\nconst route = useRoute()\nconst router = useRouter()\nconst nome = ref('')\nconst descricao = ref('')\nconst preco = ref(0)\nconst categoriaId = ref('')\nconst dataValidade = ref('')\nconst categorias = ref([])\nconst errorMessage = ref('')\nconst isEditing = ref(false)\n\nonMounted(async () => {\n  try {\n    const response = await getCategorias()\n    if (response.data.success) {\n      categorias.value = response.data.data\n    } else {\n      errorMessage.value = 'Erro ao carregar categorias.'\n    }\n\n    if (route.params.id) {\n      isEditing.value = true\n      const produtoResponse = await getProdutoById(route.params.id)\n      if (produtoResponse.data.success) {\n        const produto = produtoResponse.data.data\n        nome.value = produto.nome\n        descricao.value = produto.descricao\n        preco.value = parseFloat(produto.preco) || 0\n        categoriaId.value = produto.categoria_id\n        dataValidade.value = produto.data_validade.split('T')[0] // Formata para o formato `yyyy-MM-dd`\n      } else {\n        errorMessage.value = 'Erro ao carregar dados do produto.'\n      }\n    }\n  } catch (error) {\n    console.error('Erro ao carregar dados:', error)\n    errorMessage.value = 'Erro ao carregar dados. Por favor, tente novamente.'\n  }\n})\n\nconst handleSubmit = async () => {\n  errorMessage.value = '' // Limpar mensagem de erro anterior\n\n  try {\n    const produtoData = {\n      nome: nome.value,\n      descricao: descricao.value,\n      preco: parseFloat(preco.value),\n      categoria_id: categoriaId.value,\n      data_validade: dataValidade.value,\n    }\n\n    if (isEditing.value) {\n      const response = await updateProduto(route.params.id, produtoData)\n      if (!response.data.success) throw new Error('Erro ao atualizar o produto.')\n    } else {\n      const response = await createProduto(produtoData)\n      if (!response.data.success) throw new Error('Erro ao cadastrar o produto.')\n    }\n\n    router.push('/produtos')\n  } catch (error) {\n    console.error('Erro ao salvar produto:', error)\n\n    if (error.response && error.response.status === 422) {\n      const validationErrors = error.response.data.errors\n      errorMessage.value = Object.values(validationErrors).flat().join(', ')\n    } else {\n      errorMessage.value = 'Erro ao salvar produto. Por favor, tente novamente.'\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}