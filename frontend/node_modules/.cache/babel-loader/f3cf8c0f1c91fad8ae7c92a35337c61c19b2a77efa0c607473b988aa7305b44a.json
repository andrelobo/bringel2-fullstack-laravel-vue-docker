{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { getProdutos, deleteProduto as apiDeleteProduto } from '../api';\nexport default {\n  __name: 'ProdutoList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const produtos = ref([]);\n    const errorMessage = ref('');\n    onMounted(async () => {\n      await loadProdutos();\n    });\n    const loadProdutos = async () => {\n      try {\n        const response = await getProdutos();\n        console.log('Resposta da API:', response);\n\n        // Acessar os dados corretamente\n        if (response.data && response.data.success) {\n          produtos.value = response.data.data; // Atualiza produtos com os dados corretos\n          errorMessage.value = ''; // Reseta a mensagem de erro caso tenha sucesso\n        } else {\n          throw new Error('Resposta inesperada da API.');\n        }\n      } catch (error) {\n        console.error('Erro ao carregar produtos:', error);\n        errorMessage.value = 'Erro ao carregar produtos. Por favor, tente novamente mais tarde.';\n      }\n    };\n    const deleteProduto = async id => {\n      if (confirm('Tem certeza que deseja excluir este produto?')) {\n        try {\n          await apiDeleteProduto(id);\n          await loadProdutos();\n        } catch (error) {\n          console.error('Erro ao excluir produto:', error);\n          errorMessage.value = 'Erro ao excluir o produto. Por favor, tente novamente.';\n        }\n      }\n    };\n    const __returned__ = {\n      produtos,\n      errorMessage,\n      loadProdutos,\n      deleteProduto,\n      ref,\n      onMounted,\n      get getProdutos() {\n        return getProdutos;\n      },\n      get apiDeleteProduto() {\n        return apiDeleteProduto;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","getProdutos","deleteProduto","apiDeleteProduto","produtos","errorMessage","loadProdutos","response","console","log","data","success","value","Error","error","id","confirm"],"sources":["/home/lobo/Desktop/KODE/bringel2/frontend/src/components/ProdutoList.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8\">\n    <div class=\"max-w-7xl mx-auto\">\n      <div class=\"flex justify-between items-center mb-6\">\n        <h2 class=\"text-3xl font-extrabold text-white\">Lista de Produtos</h2>\n        <router-link to=\"/produtos/novo\" class=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded\">\n          Novo Produto\n        </router-link>\n      </div>\n      <div v-if=\"errorMessage\" class=\"bg-red-600 text-white px-4 py-3 rounded mb-4\">\n        {{ errorMessage }}\n      </div>\n      <div class=\"bg-gray-800 shadow overflow-hidden sm:rounded-md\">\n        <ul v-if=\"produtos.length > 0\" class=\"divide-y divide-gray-700\">\n          <li\n            v-for=\"produto in produtos\"\n            :key=\"produto.id\"\n            class=\"px-6 py-4 flex items-center justify-between\"\n          >\n            <div>\n              <div class=\"text-sm font-medium text-white\">{{ produto.nome }}</div>\n              <div class=\"text-sm text-gray-400\">\n                {{ produto.categoria?.nome || 'Sem categoria' }}\n              </div>\n            </div>\n            <div class=\"flex items-center space-x-4\">\n              <div class=\"text-sm font-medium text-green-400\">R$ {{ parseFloat(produto.preco).toFixed(2) }}</div>\n              <div class=\"flex space-x-2\">\n                <router-link :to=\"`/produtos/${produto.id}/editar`\" class=\"text-indigo-400 hover:text-indigo-300\">\n                  Editar\n                </router-link>\n                <button @click=\"deleteProduto(produto.id)\" class=\"text-red-400 hover:text-red-300\">\n                  Excluir\n                </button>\n              </div>\n            </div>\n          </li>\n        </ul>\n        <p v-else class=\"text-gray-400 text-center py-4\">\n          Nenhum produto encontrado.\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { getProdutos, deleteProduto as apiDeleteProduto } from '../api'\n\nconst produtos = ref([])\nconst errorMessage = ref('')\n\nonMounted(async () => {\n  await loadProdutos()\n})\n\nconst loadProdutos = async () => {\n  try {\n    const response = await getProdutos()\n\n    console.log('Resposta da API:', response)\n\n    // Acessar os dados corretamente\n    if (response.data && response.data.success) {\n      produtos.value = response.data.data // Atualiza produtos com os dados corretos\n      errorMessage.value = '' // Reseta a mensagem de erro caso tenha sucesso\n    } else {\n      throw new Error('Resposta inesperada da API.')\n    }\n  } catch (error) {\n    console.error('Erro ao carregar produtos:', error)\n    errorMessage.value = 'Erro ao carregar produtos. Por favor, tente novamente mais tarde.'\n  }\n}\n\nconst deleteProduto = async (id) => {\n  if (confirm('Tem certeza que deseja excluir este produto?')) {\n    try {\n      await apiDeleteProduto(id)\n      await loadProdutos()\n    } catch (error) {\n      console.error('Erro ao excluir produto:', error)\n      errorMessage.value = 'Erro ao excluir o produto. Por favor, tente novamente.'\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* Estilização personalizada, se necessário */\n</style>\n"],"mappings":"AA+CA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAI;AACnC,SAASC,WAAW,EAAEC,aAAa,IAAIC,gBAAgB,QAAQ,QAAO;;;;;;;IAEtE,MAAMC,QAAQ,GAAGL,GAAG,CAAC,EAAE;IACvB,MAAMM,YAAY,GAAGN,GAAG,CAAC,EAAE;IAE3BC,SAAS,CAAC,YAAY;MACpB,MAAMM,YAAY,CAAC;IACrB,CAAC;IAED,MAAMA,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMN,WAAW,CAAC;QAEnCO,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEF,QAAQ;;QAExC;QACA,IAAIA,QAAQ,CAACG,IAAI,IAAIH,QAAQ,CAACG,IAAI,CAACC,OAAO,EAAE;UAC1CP,QAAQ,CAACQ,KAAK,GAAGL,QAAQ,CAACG,IAAI,CAACA,IAAI,EAAC;UACpCL,YAAY,CAACO,KAAK,GAAG,EAAE,EAAC;QAC1B,CAAC,MAAM;UACL,MAAM,IAAIC,KAAK,CAAC,6BAA6B;QAC/C;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,4BAA4B,EAAEA,KAAK;QACjDT,YAAY,CAACO,KAAK,GAAG,mEAAkE;MACzF;IACF;IAEA,MAAMV,aAAa,GAAG,MAAOa,EAAE,IAAK;MAClC,IAAIC,OAAO,CAAC,8CAA8C,CAAC,EAAE;QAC3D,IAAI;UACF,MAAMb,gBAAgB,CAACY,EAAE;UACzB,MAAMT,YAAY,CAAC;QACrB,CAAC,CAAC,OAAOQ,KAAK,EAAE;UACdN,OAAO,CAACM,KAAK,CAAC,0BAA0B,EAAEA,KAAK;UAC/CT,YAAY,CAACO,KAAK,GAAG,wDAAuD;QAC9E;MACF;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}