{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8\"\n};\nconst _hoisted_2 = {\n  class: \"max-w-md w-full space-y-8 bg-gray-800 p-10 rounded-xl shadow-lg mx-auto\"\n};\nconst _hoisted_3 = {\n  class: \"mt-6 text-center text-3xl font-extrabold text-white\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"text-red-500 text-sm mb-4\"\n};\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  type: \"submit\",\n  class: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", null, [_createElementVNode(\"h2\", _hoisted_3, _toDisplayString($setup.isEditing ? 'Editar Produto' : 'Cadastrar Novo Produto'), 1 /* TEXT */)]), _createElementVNode(\"form\", {\n    class: \"mt-8 space-y-6\",\n    onSubmit: _withModifiers($setup.handleSubmit, [\"prevent\"])\n  }, [$setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"nome\",\n    class: \"sr-only\"\n  }, \"Nome do Produto\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"nome\",\n    name: \"nome\",\n    type: \"text\",\n    required: \"\",\n    class: \"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\",\n    placeholder: \"Nome do Produto\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.nome = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.nome]])]), _createElementVNode(\"div\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"descricao\",\n    class: \"sr-only\"\n  }, \"Descrição\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"descricao\",\n    name: \"descricao\",\n    required: \"\",\n    class: \"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\",\n    placeholder: \"Descrição\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.descricao = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.descricao]])]), _createElementVNode(\"div\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"preco\",\n    class: \"sr-only\"\n  }, \"Preço\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"preco\",\n    name: \"preco\",\n    type: \"number\",\n    step: \"0.01\",\n    required: \"\",\n    class: \"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\",\n    placeholder: \"Preço\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.preco = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.preco]])]), _createElementVNode(\"div\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"data_validade\",\n    class: \"sr-only\"\n  }, \"Data de Validade\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"data_validade\",\n    name: \"data_validade\",\n    type: \"date\",\n    required: \"\",\n    class: \"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\",\n    placeholder: \"Data de Validade\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.dataValidade = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.dataValidade]])]), _createElementVNode(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"categoria\",\n    class: \"sr-only\"\n  }, \"Categoria\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"categoria\",\n    name: \"categoria\",\n    required: \"\",\n    class: \"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.categoriaId = $event)\n  }, [_cache[9] || (_cache[9] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Selecione uma categoria\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categorias, categoria => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: categoria.id,\n      value: categoria.id\n    }, _toDisplayString(categoria.nome), 9 /* TEXT, PROPS */, _hoisted_5);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.categoriaId]])]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", _hoisted_6, _toDisplayString($setup.isEditing ? 'Atualizar' : 'Cadastrar'), 1 /* TEXT */)])], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","key","type","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","$setup","isEditing","onSubmit","_withModifiers","handleSubmit","errorMessage","_hoisted_4","_createCommentVNode","for","id","name","required","placeholder","_cache","$event","nome","descricao","step","preco","dataValidade","categoriaId","value","_Fragment","_renderList","categorias","categoria","_hoisted_5","_hoisted_6"],"sources":["/home/lobo/Desktop/KODE/bringel2/frontend/src/components/ProdutoForm.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8\">\n    <div class=\"max-w-md w-full space-y-8 bg-gray-800 p-10 rounded-xl shadow-lg mx-auto\">\n      <div>\n        <h2 class=\"mt-6 text-center text-3xl font-extrabold text-white\">\n          {{ isEditing ? 'Editar Produto' : 'Cadastrar Novo Produto' }}\n        </h2>\n      </div>\n      <form class=\"mt-8 space-y-6\" @submit.prevent=\"handleSubmit\">\n        <div v-if=\"errorMessage\" class=\"text-red-500 text-sm mb-4\">\n          {{ errorMessage }}\n        </div>\n        <div>\n          <label for=\"nome\" class=\"sr-only\">Nome do Produto</label>\n          <input id=\"nome\" name=\"nome\" type=\"text\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Nome do Produto\" v-model=\"nome\">\n        </div>\n        <div>\n          <label for=\"descricao\" class=\"sr-only\">Descrição</label>\n          <textarea id=\"descricao\" name=\"descricao\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Descrição\" v-model=\"descricao\"></textarea>\n        </div>\n        <div>\n          <label for=\"preco\" class=\"sr-only\">Preço</label>\n          <input id=\"preco\" name=\"preco\" type=\"number\" step=\"0.01\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Preço\" v-model=\"preco\">\n        </div>\n        <div>\n          <label for=\"data_validade\" class=\"sr-only\">Data de Validade</label>\n          <input id=\"data_validade\" name=\"data_validade\" type=\"date\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Data de Validade\" v-model=\"dataValidade\">\n        </div>\n        <div>\n          <label for=\"categoria\" class=\"sr-only\">Categoria</label>\n          <select id=\"categoria\" name=\"categoria\" required\n            class=\"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            v-model=\"categoriaId\">\n            <option value=\"\">Selecione uma categoria</option>\n            <option v-for=\"categoria in categorias\" :key=\"categoria.id\" :value=\"categoria.id\">\n              {{ categoria.nome }}\n            </option>\n          </select>\n        </div>\n        <div>\n          <button type=\"submit\"\n            class=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\">\n            {{ isEditing ? 'Atualizar' : 'Cadastrar' }}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { createProduto, updateProduto, getProdutoById, getCategorias } from '../api'\n\nconst route = useRoute()\nconst router = useRouter()\nconst nome = ref('')\nconst descricao = ref('')\nconst preco = ref(0)\nconst categoriaId = ref('')\nconst dataValidade = ref('')\nconst categorias = ref([])\nconst errorMessage = ref('')\nconst isEditing = ref(false)\n\nonMounted(async () => {\n  try {\n    const response = await getCategorias()\n    if (response.data.success) {\n      categorias.value = response.data.data\n    } else {\n      errorMessage.value = 'Erro ao carregar categorias.'\n    }\n\n    if (route.params.id) {\n      isEditing.value = true\n      const produtoResponse = await getProdutoById(route.params.id)\n      if (produtoResponse.data.success) {\n        const produto = produtoResponse.data.data\n        nome.value = produto.nome\n        descricao.value = produto.descricao\n        preco.value = parseFloat(produto.preco) || 0\n        categoriaId.value = produto.categoria_id\n        dataValidade.value = produto.data_validade.split('T')[0] // Formata para o formato `yyyy-MM-dd`\n      } else {\n        errorMessage.value = 'Erro ao carregar dados do produto.'\n      }\n    }\n  } catch (error) {\n    console.error('Erro ao carregar dados:', error)\n    errorMessage.value = 'Erro ao carregar dados. Por favor, tente novamente.'\n  }\n})\n\nconst handleSubmit = async () => {\n  errorMessage.value = '' // Limpar mensagem de erro anterior\n\n  try {\n    const produtoData = {\n      nome: nome.value,\n      descricao: descricao.value,\n      preco: parseFloat(preco.value),\n      categoria_id: categoriaId.value,\n      data_validade: dataValidade.value,\n    }\n\n    if (isEditing.value) {\n      const response = await updateProduto(route.params.id, produtoData)\n      if (!response.data.success) throw new Error('Erro ao atualizar o produto.')\n    } else {\n      const response = await createProduto(produtoData)\n      if (!response.data.success) throw new Error('Erro ao cadastrar o produto.')\n    }\n\n    router.push('/produtos')\n  } catch (error) {\n    console.error('Erro ao salvar produto:', error)\n\n    if (error.response && error.response.status === 422) {\n      const validationErrors = error.response.data.errors\n      errorMessage.value = Object.values(validationErrors).flat().join(', ')\n    } else {\n      errorMessage.value = 'Erro ao salvar produto. Por favor, tente novamente.'\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}